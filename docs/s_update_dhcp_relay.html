
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>s_update_dhcp_relay &#8212; SecureCRT Tools 2.1.0 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="s_update_interface_desc" href="s_update_interface_desc.html" />
    <link rel="prev" title="s_switchport_mapping" href="s_switchport_mapping.html" /> 
  </head><body>
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">SecureCRT Tools 2.1.0 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="s_switchport_mapping.html" title="s_switchport_mapping"
             accesskey="P">previous</a> |
          <a href="s_update_interface_desc.html" title="s_update_interface_desc"
             accesskey="N">next</a> |
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-s_update_dhcp_relay">
<span id="s-update-dhcp-relay"></span><h1>s_update_dhcp_relay<a class="headerlink" href="#module-s_update_dhcp_relay" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="s_update_dhcp_relay.script_main">
<code class="descclassname">s_update_dhcp_relay.</code><code class="descname">script_main</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#s_update_dhcp_relay.script_main" title="Permalink to this definition">¶</a></dt>
<dd><div class="line-block">
<div class="line">SINGLE device script</div>
<div class="line">Author: Jamie Caesar</div>
<div class="line">Email: <a class="reference external" href="mailto:jcaesar&#37;&#52;&#48;presidio&#46;com">jcaesar<span>&#64;</span>presidio<span>&#46;</span>com</a></div>
</div>
<p>This script will scan the running configuration of the connected device looking for instances of old IP helper/DHCP
relay addresses (IOS/NXOS) on interfaces and if found will update the helper/relay addresses with the newer ones.
The new and old addresses that the script looks for is saved in the settings.ini file, as documented below.</p>
<p>This script will prompt you to run in “Check Mode”, where the configuration changes the script would be pushed to
the device are ONLY written to a file and NO CHANGES will be made to the device.  If you select “No” when prompted
this script will push the configuration changes to the device. Also, when the changes are pushed to the device this
script will save the running config before and after the changes are made, and will also output a log of the
configuration session showing all the commands pushed.</p>
<p><strong>Script Settings</strong> (found in settings/settings.ini):</p>
<ul>
<li><div class="first line-block">
<div class="line"><strong>show_instructions</strong> - When True, displays a pop-up upon launching the script</div>
<div class="line">explaining where to modify the list of commands sent to devices.  This window also</div>
<div class="line">prompts the user if they want to continue seeing this message. If not, the script</div>
<div class="line">changes this setting to False.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><strong>old_relays</strong> - This is a comma separated list of IP addresses that the script should</div>
<div class="line">search for as relay addresses in the device’s configuration.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><strong>new_relays</strong> - This is a comma separated list of IP addresses that are the new relay</div>
<div class="line">addresses that should be added to any interface that has at least one of the old</div>
<div class="line">helper/relay addresses on it.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><strong>remove_old_relays</strong> - If True, the script will add the new relays and REMOVE the old</div>
<div class="line">relays immediately after adding the new ones.  If False (default), the script will</div>
<div class="line">only add the new relays to interfaces where at least one old relay is found.  This</div>
<div class="line">is useful when you want to push out new relays as part of a migration process</div>
<div class="line">without removing the old relays.  Since this script will not try to push new relay</div>
<div class="line">addresses that already exist on an interface, the script can be run again with this</div>
<div class="line">option set to True to later remove the old relays.</div>
</div>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session</strong> (<a class="reference internal" href="tools-sessions.html#securecrt_tools.sessions.Session" title="securecrt_tools.sessions.Session"><em>sessions.Session</em></a>) – A subclass of the sessions.Session object that represents this particular script session (either
SecureCRTSession or DirectSession)</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table of Contents</h3>
          <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#important-note-for-users-of-older-versions">Important Note For Users of Older Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#what-these-scripts-do">What These Scripts Do</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#using-a-jumpbox-bastion-host">Using a Jumpbox/Bastion Host</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#running-the-scripts">Running The Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#settings">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="README.html#contributing">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="scripts.html">Scripts</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="single_device_scripts.html">Single Device Scripts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="s_add_global_config.html">s_add_global_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_AireOS_collect_ap_detail.html">s_AireOS_collect_ap_detail</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_AireOS_collect_auth_list.html">s_AireOS_collect_auth_list</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_AireOS_collect_interface_detail.html">s_AireOS_collect_interface_detail</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_arp_to_csv.html">s_arp_to_csv</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_cdp_to_csv.html">s_cdp_to_csv</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_create_sessions_from_cdp.html">s_create_sessions_from_cdp</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_document_device.html">s_document_device</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_eigrp_topology_summary.html">s_eigrp_topology_summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_eigrp_topology_to_csv.html">s_eigrp_topology_to_csv</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_interface_stats.html">s_interface_stats</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_mac_to_csv.html">s_mac_to_csv</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_nexthop_summary.html">s_nexthop_summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_save_output.html">s_save_output</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_save_running.html">s_save_running</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_switchport_mapping.html">s_switchport_mapping</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">s_update_dhcp_relay</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_update_interface_desc.html">s_update_interface_desc</a></li>
<li class="toctree-l3"><a class="reference internal" href="s_vlan_to_csv.html">s_vlan_to_csv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="multi_device_scripts.html">Multiple Device Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="no_device_scripts.html">No Device Scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="writing_scripts.html">Writing Your Own Scripts</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="s_switchport_mapping.html" title="s_switchport_mapping"
              >previous</a> |
            <a href="s_update_interface_desc.html" title="s_update_interface_desc"
              >next</a> |
            <a href="py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/s_update_dhcp_relay.rst.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Jamie Caesar.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>